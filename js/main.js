"use strict";var app={};app.partial={};var debug=/localhost[:]9000|nelson119.github.io/.test(location.href);$(function(){$.each(app.partial,function(t,e){e()}),app.imageReload.init(),app.imageReload.callback=function(){$("html").addClass("loading-done")},$("html.mobile").length&&$(".home[role=main]").length&&TweenMax.to("body, html",.5,{scrollTop:$(".menu").offset().top-$("h1").height(),onComplete:function(){TweenMax.to("body, html",.5,{delay:1,scrollTop:.4*$(window).height()})}})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};app.utility=new function(){$.fn.hasAttr=function(t){var e=$(this).attr(t);return"undefined"!==("undefined"==typeof e?"undefined":_typeof(e))&&e!==!1};var t=encodeURIComponent("pfizer"),e=encodeURIComponent("性福在此一舉"),a=encodeURIComponent("http://www.behard.com.tw/");this.share={facebook:function(n,o){n=encodeURIComponent(n||a+"?utm_source=facebook&utm_medium=share&utm_campaign="+t),o=encodeURIComponent(o||e),window.open("https://www.facebook.com/sharer.php?u="+n+"&amp;t="+o)},googleplus:function(e){e=encodeURIComponent(e||a+"?utm_source=g+&utm_medium=googleplus_m&utm_campaign="+t),window.open("https://plus.google.com/share?url="+e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},email:function(n,o){n=encodeURIComponent(n||a+"?utm_source=email&utm_medium=email_m&utm_campaign="+t),o=encodeURIComponent(o||e);var i=encodeURIComponent(""+n+" #"+o);window.open("https://mail.google.com/mail/?view=cm&fs=1&to=&su=與你分享:"+o+"&body="+i+"&bcc=")},line:function(n,o){n=n||a+"?utm_source=line&utm_medium=share&utm_campaign="+t,o=o||e;encodeURIComponent(""+n+" #"+o);window.open("http://line.me/R/msg/text/?"+o+"%0D%0A"+n)}},this.getParam=function(t){var e=new RegExp("^.*[?&]"+t+"[=]([^&]+).*$","i");if(!e.test(location.search))return null;var a=location.search.replace(e,"$1");return decodeURIComponent(a)}},app.partial.preload=function(){function t(t){function e(t){n[t]=!0;var e=!0;$.each(n,function(t,a){e=a&&e}),e&&a()}function a(){"function"==typeof app.imageReload.callback&&app.imageReload.callback()}var n={},o=[],i=$("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]");i.each(function(t,e){$(e).attr("data-src")&&(n[$(e).attr("data-src")]=!1,o.push(e))}),$.each(n,function(t,a){if(/\.svg$/.test(t))$.get(t,function(a){$(o).filter(function(){return t==$(this).attr("data-src")}).each(function(t,e){"img"===e.tagName.toLowerCase()?($("svg",a).clone().insertAfter(e),$(e).remove()):$(e).removeAttr("data-src").html($("svg",a).clone())});e(t)});else{var n=new Image;n.onload=function(){$(o).filter(function(){return t==$(this).attr("data-src")}).each(function(t,e){"img"===e.tagName.toLowerCase()?$(e).attr("src",$(e).attr("data-src")):$(e).css("background-image","url("+$(e).attr("data-src")+")")});e(t)},n.src=t}})}app.dementions={mobile:!1,desktop:!1},app.imageReload={init:function(){$(window).on("resize",function(){$("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]").length&&$(window).width()<=768?t(function(){app.dementions.mobile=!0}):$("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]").length&&$(window).width()>768?t(function(){app.dementions.desktop=!0}):app.imageReload.callback()}).trigger("resize")},refresh:function(){$(window).trigger("resize")},callback:function(){}}},app.partial.spa=function(){function t(t,a,n,i,r){r=r||!1,o.trigger("page:preupdate"),r||location.pathname===t||$("html").removeClass("loading-done"),$.get(t,function(c){var l=l,s="";$(c).each(function(t,e){"og:title"===$(e).attr("property")&&(l=$(e).attr("content")),"container"===$(e).attr("role")&&(s=$("[role=content]",e)),"menu"===$(e).attr("role")&&$(".menu a",e).each(function(t){$("[role=menu] .menu a").eq(t).attr("data-href",$(this).attr("data-href"))})}),r||e({uri:t,name:a,menu:n,title:l},"update content"+t),o.html(s),(i||function(){})(),o.trigger("page:update:"+a,n),o.trigger("page:update",n),app.imageReload.refresh()})}function e(t,e){t.title=t.title||i,document.title=t.title,history.pushState(t,t.title,t.uri)}var a=(/localhost[:]9000|github.io/.test(location.href),/nelson.works/.test(location.href),/staging/.test(location.href)),n="/";n=a?"/staging/":n;var o=$("#container"),i=document.title;if(app.spa={container:o,title:i},$(window).on("popstate",function(e){var a=e.originalEvent.state;return null===a&&(location.href=n),document.title=a.title,t(a.uri,a.name,a.menu,function(){},!0),!0}),$("a[data-href]").on("click",function(e){var a=$(this),n=a.attr("data-href"),o=a.attr("data-ref"),i=null;t(n,o,i,function(){a.addClass("active").siblings().removeClass("active")})}),app.utility.getParam("path")){var r=decodeURIComponent(app.utility.getParam("path"));$("a[data-href="+r+"]").trigger("click")}o.on("page:update",function(t,e){}),o.trigger("page:update","home")},app.partial.i18n=function(){$(".i18n .to").on("click",function(){return $(this).addClass("active").siblings().removeClass("active"),$("html").attr("lang")!==$(this).attr("data-lang")&&($("html").removeClass("loading-done"),$("html").attr("lang",$(this).attr("data-lang")),void app.imageReload.refresh())});var t=$("html").attr("lang");t&&$(".i18n .to[data-lang="+t+"]").trigger("click")},app.partial.ga=function(){$("[data-ga]").on("click",function(t){$(this).attr("data-ga"),ga("send","event","Button","click",$(this).attr("data-ga"))})};